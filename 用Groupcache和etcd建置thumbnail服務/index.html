<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=en><![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang=en><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang=en><![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en><!--<![endif]--><head><meta charset=utf-8><title>用Groupcache和etcd建置thumbnail服務 &#8211; Le murmure de Julian</title><meta name=description content><meta name=keywords content="Golang"><meta property="og:title" content="用Groupcache和etcd建置thumbnail服務"><meta property="og:description" content="在之前工作的時候, 做了一個專門用來產生thumbnail(縮圖)的服務, 當時這東西主要的目的是為了因應Zencircle會有不同尺寸的縮圖的"><meta property="og:type" content="article"><meta property="og:url" content="http://blog.jln.co/%E7%94%A8Groupcache%E5%92%8Cetcd%E5%BB%BA%E7%BD%AEthumbnail%E6%9C%8D%E5%8B%99/"><meta property="og:image" content="http://blog.jln.co/images/posts/2016-11-11-%E7%94%A8groupcache%E5%92%8Cetcd%E5%BB%BA%E7%BD%AEthumbnail%E6%9C%8D%E5%8B%99.md.jpg"><meta property="article:published_time" content="2016-11-11T14:53:03+00:00"><meta property="article:modified_time" content="2016-11-11T14:53:03+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://blog.jln.co/images/posts/2016-11-11-%E7%94%A8groupcache%E5%92%8Cetcd%E5%BB%BA%E7%BD%AEthumbnail%E6%9C%8D%E5%8B%99.md.jpg"><meta name=twitter:title content="用Groupcache和etcd建置thumbnail服務"><meta name=twitter:description content="在之前工作的時候, 做了一個專門用來產生thumbnail(縮圖)的服務, 當時這東西主要的目的是為了因應Zencircle會有不同尺寸的縮圖的"><link rel=canonical href=http://blog.jln.co/%E7%94%A8Groupcache%E5%92%8Cetcd%E5%BB%BA%E7%BD%AEthumbnail%E6%9C%8D%E5%8B%99/><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.css><link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel=stylesheet type=text/css><meta http-equiv=cleartype content="on"><meta name=generator content="Hugo 0.73.0"><script src=/js/vendor/modernizr-2.6.2.custom.min.js></script><script async src=https://unpkg.com/mermaid@8.2.3/dist/mermaid.min.js></script><link rel="shortcut icon" href=/favicon.png></head><body id=post><nav id=dl-menu class=dl-menuwrapper role=navigation style=display:inline-block><button class=dl-trigger>Open Menu</button><ul class=dl-menu><li><a href=/>Home</a></li><li><a href=#>About</a><ul class=dl-submenu><li><img src=/images/avatar.png alt="Julian Shen's photo" class=author-photo><h4>Julian Shen</h4><p>Softward developer</p></li><li><a href=mailto:julianshen22@gmail.com><i class="fa fa-fw fa-envelope"></i>Email</a></li><li><a href=https://linkedin.com/in/julianshen><i class="fa fa-fw fa-linkedin"></i>LinkedIn</a></li><li><a href=https://github.com/julianshen><i class="fa fa-fw fa-github"></i>GitHub</a></li><li><a href=https://instagram.com/julianshen><i class="fa fa-fw fa-instagram"></i>Instagram</a></li></ul></li><li><a href=#>Posts</a><ul class=dl-submenu><li><a href=/post/>All Posts</a></li><li><a href=/tags/>All Tags</a></li></ul></li><li><a href=/></a></li></ul></nav><div id=main role=main><article class=hentry><header class=header-title><div class=header-title-wrap><h1 class=entry-title><a href=/%E7%94%A8Groupcache%E5%92%8Cetcd%E5%BB%BA%E7%BD%AEthumbnail%E6%9C%8D%E5%8B%99/ rel=bookmark title=用Groupcache和etcd建置thumbnail服務>用Groupcache和etcd建置thumbnail服務</a></h1><h2><span class="entry-date date published"><time datetime="2016-11-11 14:53:03 +0000 UTC">November 11, 2016</time></span></h2><p class=entry-reading-time><i class="fa fa-clock-o"></i>Reading time ~4 minutes</p></div></header><div class=entry-content><p>在之前工作的時候, 做了一個專門用來產生thumbnail(縮圖)的服務, 當時這東西主要的目的是為了因應<a href=http://www.zencircle.com>Zencircle</a>會有不同尺寸的縮圖的需求,
而且每次client app改版又可能多新的尺寸, 因此當時寫了這個叫Minami的服務, 當時幾個簡單的需求是:</p><ol><li>要能夠被CDN所cache (因此URL設定上不採用query string,而是簡單的URL)</li><li>能夠容易被deploy</li><li>能夠的簡單的被擴展 (加一台新的instance就可以)</li><li>不需要太多額外的dependencies</li></ol><p>不過那時候寫的版本, 沒寫得很好, 這兩天花了點時間重寫了一個叫做<a href=https://github.com/julianshen/minami_t>Minami_t</a>(本來Minami這名字就是來自於Minami Takahashi, 所以加個"t&rdquo; XD),
新的這個重寫的版本採一樣的架構(使用了<a href=https://github.com/golang/groupcache>groupcache</a>), 但多加了Peer discovery的功能(使用<a href=https://github.com/coreos/etcd>etcd</a>), 但少了
臉部辨識跟色情照片偵測功能(原本在前公司的版本有, 新寫的這個我懶得加了)</p><p>我把這次重寫的版本放到github上: <a href=https://github.com/julianshen/minami_t>Minami_t</a></p><p>不過這算是一個sample project, 影像來源來自於Imgur, 如何使用或如何改成支援自己的Image host, 那就自行看source code吧, 這版本縮圖的部分用了我改過的<a href=https://github.com/julianshen/vips>VIPS</a>,
當然原來版本的VIPS也是可用, 這版本只是我當初為了支援Face crop所改出來的</p><h3 id=groupcache->Groupcache</h3><p>先來說說為什麼採用<a href=https://github.com/golang/groupcache>groupcache</a>? 我不是很確定當時為何會看到<a href=https://github.com/golang/groupcache>groupcache</a>這來, 但後來想想, 採用它的原因可能是看到<a href=https://talks.golang.org/2013/oscon-dl.slide#43>這份投影片</a>,
它是memchached的作者寫來用在dl.google.com上面的, 架構上剛好也適合thumbnail service, 可能剛好投影片又提到thumbnail(我腦波也太弱了吧), 所以當初採用它來實作這個service</p><p>架構上會像是這樣:</p><p><img src=/images/posts/minami1.001.jpeg alt></p><p>Groupcache有幾個特色</p><ol><li>Embedded, 不像memcached, redis需要額外的server, 它是嵌入在你原本的程式內的</li><li>Shared, Cache是可以所有Peer共享的, 資料未必放在某特定的Peer上, 有可能在本機, 也可能在另一台, 當然如果剛好在本機時就會快一點</li><li>LRU, Cache總量有上限限制的, 過久沒使用的資料有可能會被移出記憶體</li><li>Immutable, key所對應的值不像memcached, redis可以修改, 而是當cache miss時, 他會再透過你實作的getter去抓真正的資料</li></ol><p>要讓Groupcache可以在不同node間共享cache, 就必須開啟HTTPPool, 像下面</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang>	<span style=color:#a6e22e>ln</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Listen</span>(<span style=color:#e6db74>&#34;tcp&#34;</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;:%d&#34;</span>, <span style=color:#a6e22e>port</span>))
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>err</span>
	}

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>port</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
		<span style=color:#a6e22e>port</span> = <span style=color:#a6e22e>ln</span>.<span style=color:#a6e22e>Addr</span>().(<span style=color:#f92672>*</span><span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>TCPAddr</span>).<span style=color:#a6e22e>Port</span>
	}

	<span style=color:#a6e22e>_url</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;http://%s:%d&#34;</span>, <span style=color:#a6e22e>ip</span>, <span style=color:#a6e22e>port</span>)
	<span style=color:#a6e22e>pool</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>groupcache</span>.<span style=color:#a6e22e>NewHTTPPool</span>(<span style=color:#a6e22e>_url</span>)

	<span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Group cache served at port %s:%d\n&#34;</span>, <span style=color:#a6e22e>ip</span>, <span style=color:#a6e22e>port</span>)
		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Serve</span>(<span style=color:#a6e22e>ln</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandlerFunc</span>(<span style=color:#a6e22e>pool</span>.<span style=color:#a6e22e>ServeHTTP</span>)); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;GROUPCACHE PORT %d, ERROR: %s\n&#34;</span>, <span style=color:#a6e22e>port</span>, <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
			<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Exit</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
		}
	}()
</code></pre></div><p>Groupcache 的getter範例:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>getter</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>groupcache</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>key</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>dest</span> <span style=color:#a6e22e>groupcache</span>.<span style=color:#a6e22e>Sink</span>) <span style=color:#66d9ef>error</span> {
	<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Cache missed for &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>key</span>)

	<span style=color:#a6e22e>params</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>key</span>, <span style=color:#e6db74>&#34;:&#34;</span>)

	<span style=color:#66d9ef>if</span> len(<span style=color:#a6e22e>params</span>) <span style=color:#f92672>!=</span> <span style=color:#ae81ff>3</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ErrWrongKey</span>
	}

	<span style=color:#a6e22e>d</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ctx</span>.(<span style=color:#f92672>*</span><span style=color:#a6e22e>Downloader</span>)
	<span style=color:#a6e22e>fileName</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>d</span>.<span style=color:#a6e22e>Download</span>(<span style=color:#e6db74>&#34;http://i.imgur.com/&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>params</span>[<span style=color:#ae81ff>2</span>])

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>err</span>
	}

	<span style=color:#75715e>//Should assume correct since it is checked at where it is from
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Atoi</span>(<span style=color:#a6e22e>params</span>[<span style=color:#ae81ff>0</span>])
	<span style=color:#a6e22e>height</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Atoi</span>(<span style=color:#a6e22e>params</span>[<span style=color:#ae81ff>1</span>])

	<span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>resize</span>(<span style=color:#a6e22e>fileName</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>)

	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>err</span>
	}

	<span style=color:#a6e22e>dest</span>.<span style=color:#a6e22e>SetBytes</span>(<span style=color:#a6e22e>data</span>)
	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
}
</code></pre></div><h3 id=etcd->etcd</h3><p>我之前寫的版本有個問題是, 沒有自動的peer discovery的功能, 所以必須手動加peer, 這版本把etcd導入, etcd已經是coreos的核心之一了, 簡單, 又蠻好用的,
不過選它也是它直接有Go的client了</p><p>Peer discovery的部分, 參考了<a href=https://github.com/go-kit/kit>Go kit</a>的<a href=https://github.com/go-kit/kit/tree/master/sd/etcd>etcd實作</a>,
<a href=https://github.com/go-kit/kit>Go kit</a>是一個蠻好的Go的微服務框架, 它裡面也有實作用etcd做service discovery, 這一部分正好是這邊需要的, 因此
參考並寫出了這邊這個版本</p><p>重點是要能夠在有新server加入後就新增到peer list去, 有server離開後要拿掉, 因此必須利用到etcd的watch功能</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>ServiceRegistry</span>) <span style=color:#a6e22e>Watch</span>(<span style=color:#a6e22e>watcher</span> <span style=color:#a6e22e>Watcher</span>) {
	<span style=color:#a6e22e>key</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;/%s/nodes&#34;</span>, <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>name</span>)
	<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;watch &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>key</span>)
	<span style=color:#a6e22e>w</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>etcd_client</span>.<span style=color:#a6e22e>Watcher</span>(<span style=color:#a6e22e>key</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>etcd</span>.<span style=color:#a6e22e>WatcherOptions</span>{<span style=color:#a6e22e>AfterIndex</span>: <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>Recursive</span>: <span style=color:#66d9ef>true</span>})

	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>retryInterval</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Duration</span> = <span style=color:#ae81ff>1</span>

	<span style=color:#66d9ef>for</span> {
		<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Next</span>(<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>ctx</span>)

		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
			<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Failed to connect to etcd. Will retry after %d sec \n&#34;</span>, <span style=color:#a6e22e>retryInterval</span>)
			<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#a6e22e>retryInterval</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span>)

			<span style=color:#a6e22e>retryInterval</span> = (<span style=color:#a6e22e>retryInterval</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>%</span> <span style=color:#ae81ff>4096</span>
		} <span style=color:#66d9ef>else</span> {
			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>retryInterval</span> &gt; <span style=color:#ae81ff>1</span> {
				<span style=color:#a6e22e>retryInterval</span> = <span style=color:#ae81ff>1</span>
			}

			<span style=color:#a6e22e>list</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>GetNodes</span>()
			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> {
				<span style=color:#a6e22e>watcher</span>(<span style=color:#a6e22e>list</span>)
			} <span style=color:#66d9ef>else</span> {
				<span style=color:#75715e>//skip first
</span><span style=color:#75715e></span>			}
		}
	}
}
</code></pre></div><p>Watch可以用來監測某一個key有無改變, 因此我們只要一直監測server node的list就好(指定一個key來放), 因此流程是這樣的:</p><ol><li>Server開啟後, 自己到etcd註冊自己, 並把etcd上找到的nodes全加到peer list中</li><li>另一台由etcd發現有另一台出現後, 把它加到peer list中</li><li>Server下線後, 要移除自己的註冊, 其他機器要從peer list把它移除</li></ol><p>問題點在最後一點, Server下線有可能是被kill的, 也有可能按ctrl-c中斷的, 這時候就要監聽os的signal,
在程式被結束前, 可以先去移除註冊, 像這樣:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#75715e>//Listening to exit signals for graceful leave
</span><span style=color:#75715e></span><span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
	<span style=color:#a6e22e>c</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>chan</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Signal</span>, <span style=color:#ae81ff>1</span>)
	<span style=color:#a6e22e>signal</span>.<span style=color:#a6e22e>Notify</span>(<span style=color:#a6e22e>c</span>, <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Interrupt</span>, <span style=color:#a6e22e>syscall</span>.<span style=color:#a6e22e>SIGINT</span>, <span style=color:#a6e22e>syscall</span>.<span style=color:#a6e22e>SIGTERM</span>)
	<span style=color:#f92672>&lt;-</span><span style=color:#a6e22e>c</span>
	<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;I&#39;m leaving&#34;</span>)
	<span style=color:#a6e22e>cm</span>.<span style=color:#a6e22e>Leave</span>()
	<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Exit</span>(<span style=color:#ae81ff>0</span>)
}()
</code></pre></div><p>這只是一個sample而已, 還有一些待改進的</p><footer class=entry-meta><span class=entry-tags><a href=/tags/#Golang title="Pages tagged Golang" class=tag><span class=term>Golang</span></a></span><div class=social-share><ul class="socialcount socialcount-small inline-list"><li class=facebook><a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fblog.jln.co%2f%25E7%2594%25A8Groupcache%25E5%2592%258Cetcd%25E5%25BB%25BA%25E7%25BD%25AEthumbnail%25E6%259C%258D%25E5%258B%2599%2f" target=_blank title="Share on Facebook"><span class=count><i class="fa fa-facebook-square"></i>Like</span></a></li><li class=twitter><a href="https://twitter.com/intent/tweet?text=http%3a%2f%2fblog.jln.co%2f%25E7%2594%25A8Groupcache%25E5%2592%258Cetcd%25E5%25BB%25BA%25E7%25BD%25AEthumbnail%25E6%259C%258D%25E5%258B%2599%2f" target=_blank title="Share on Twitter"><span class=count><i class="fa fa-twitter-square"></i>Tweet</span></a></li><li class=line><a href="https://social-plugins.line.me/lineit/share?url=http%3a%2f%2fblog.jln.co%2f%25E7%2594%25A8Groupcache%25E5%2592%258Cetcd%25E5%25BB%25BA%25E7%25BD%25AEthumbnail%25E6%259C%258D%25E5%258B%2599%2f" target=_blank title="Share on LINE"><span class=count><i class="fab fa-line"></i>LINE</span></a></li></ul></div></footer></div><section id=disqus_thread><div class=fb-comments data-href=http://blog.jln.co/%E7%94%A8Groupcache%E5%92%8Cetcd%E5%BB%BA%E7%BD%AEthumbnail%E6%9C%8D%E5%8B%99/ data-numposts=5 data-width></div></section></article></div><div class=footer-wrapper><footer role=contentinfo><span>Powered by <a href=https://gohugo.io/ rel=nofollow>Hugo</a> using the <a href=https://github.com/dldx/hpstr-hugo-theme rel=nofollow>HPSTR theme</a>.</span></footer></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js></script><script src=https://kit.fontawesome.com/872a53b461.js crossorigin=anonymous></script><script>window.jQuery||document.write('<script src="\/js\/vendor\/jquery-1.9.1.min.js"><\/script>')</script><script src=/js/scripts.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-79243751-1','auto');ga('send','pageview');}</script><div id=fb-root></div><script async defer crossorigin=anonymous src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v7.0&appId=293999444006555&autoLogAppEvents=1" nonce=geZSUIUh></script></body></html>
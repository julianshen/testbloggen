<!doctype html><!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=en><![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang=en><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang=en><![endif]--><!--[if gt IE 8]><!--><html class=no-js lang=en><!--<![endif]--><head><meta charset=utf-8><title>Android &#8211; Le murmure de Julian</title><meta name=description content><meta property="og:title" content="Android"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="http://blog.jln.co/tags/Android/"><meta property="og:image" content="http://blog.jln.co/images/avatar.png"><meta property="og:updated_time" content="2017-03-12T12:07:35+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://blog.jln.co/images/avatar.png"><meta name=twitter:title content="Android"><meta name=twitter:description content><link rel=canonical href=http://blog.jln.co/tags/Android/><link href=http://blog.jln.co/tags/Android/feed.xml rel=alternate type=application/rss+xml title="Le murmure de Julian"><link href=http://blog.jln.co/tags/Android/feed.xml rel=feed type=application/rss+xml title="Le murmure de Julian"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.css><link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel=stylesheet type=text/css><meta http-equiv=cleartype content="on"><meta name=generator content="Hugo 0.73.0"><script src=/js/vendor/modernizr-2.6.2.custom.min.js></script><script async src=https://unpkg.com/mermaid@8.2.3/dist/mermaid.min.js></script><link rel="shortcut icon" href=/favicon.png></head><body id=post-index><nav id=dl-menu class=dl-menuwrapper role=navigation style=display:inline-block><button class=dl-trigger>Open Menu</button><ul class=dl-menu><li><a href=/>Home</a></li><li><a href=#>About</a><ul class=dl-submenu><li><img src=/images/avatar.png alt="Julian Shen's photo" class=author-photo><h4>Julian Shen</h4><p>Softward developer</p></li><li><a href=mailto:julianshen22@gmail.com><i class="fa fa-fw fa-envelope"></i>Email</a></li><li><a href=https://linkedin.com/in/julianshen><i class="fa fa-fw fa-linkedin"></i>LinkedIn</a></li><li><a href=https://github.com/julianshen><i class="fa fa-fw fa-github"></i>GitHub</a></li><li><a href=https://instagram.com/julianshen><i class="fa fa-fw fa-instagram"></i>Instagram</a></li></ul></li><li><a href=#>Posts</a><ul class=dl-submenu><li><a href=/post/>All Posts</a></li><li><a href=/tags/>All Tags</a></li></ul></li><li><a href=/></a></li></ul></nav><div class=entry-header><div class=header-title><div class=header-title-wrap><h1><a href=/ title="Go to the homepage">Le murmure de Julian</a></h1><h2>Android</h2></div></div></div><div id=main role=main><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2011-05-14 15:27:41 +0000 UTC"><a href=/AndroidTip-How-Twitter-for-Android-implements-auto-completion-in-post-screen/>May 14, 2011</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>Reading time ~1 minute</span></div><h1 class=entry-title><a href=/AndroidTip-How-Twitter-for-Android-implements-auto-completion-in-post-screen/ rel=bookmark title="[Android][Tip] How Twitter for Android implements auto completion in post screen?" itemprop=url>[Android][Tip] How Twitter for Android implements auto completion in post screen?</a></h1></header><div class=entry-content><div class=posterous_autopost><p>Twitter for Android popup a user list when you enter &ldquo;@&rdquo; in post screen. Like this:</p><div class="p_embed p_image_embed"><a href=http://posterous.com/getfile/files.posterous.com/temp-2011-05-14/sBGyFmhynhgeFmfsfCqjzIqEuBCwzpzkbhcwhuHnroxdmiHtylrzHyCtpeJD/t1.png.scaled1000.png><img alt=T1 height=455 src=http://posterous.com/getfile/files.posterous.com/temp-2011-05-14/sBGyFmhynhgeFmfsfCqjzIqEuBCwzpzkbhcwhuHnroxdmiHtylrzHyCtpeJD/t1.png.scaled500.png width=500></a></div><p>How it implement such feature? The solution can&rsquo;t be simpler - You could use <strong><span style=font-size:medium><a href=http://developer.android.com/reference/android/widget/MultiAutoCompleteTextView.html>MultiAutoCompeleteTextView</a></span></strong> to do this.</p><p>Here is the sample codes:</p><p><script src="https://gist.github.com/972014.js?file=gistfile1.java"></script></p><p>And the result:</p><div class="p_embed p_image_embed"><img alt=T2 height=554 src=http://posterous.com/getfile/files.posterous.com/temp-2011-05-14/jokbfzsgrCCDIirGFyluGlsiqwbpDsasxnvvGxlbmCjfHhdInJzDvogofucm/t2.png.scaled500.png width=475></div><p>To use this widget, you need to implement a Tokenizer to tell it where the sub text is. In this case, just find the string between &rsquo;@&rsquo; and space.</p></div></div></article><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2011-05-11 10:16:23 +0000 UTC"><a href=/Google-I/O-day-1-keynote%E6%84%9F%E6%83%B3/>May 11, 2011</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>Reading time ~2 minutes</span></div><h1 class=entry-title><a href=/Google-I/O-day-1-keynote%E6%84%9F%E6%83%B3/ rel=bookmark title="Google I/O day 1 keynote感想" itemprop=url>Google I/O day 1 keynote感想</a></h1></header><div class=entry-content><div class=posterous_autopost><p>昨晚熬夜看了Google I/O的live(那是一定要的啦!), 雖然沒睡多少, 到現在依然興奮!</p><p>今年Day 1的Keynote搞到真的像是Android I/O一樣, Android儼然是今年必然主角一樣, 不過與我之前想像的不太一樣, 今年沒特別著重在平板, 也沒特別著重在TV和其他裝置, 而是Android本身, Android本身已經適用到手機, 平板, TV這是自然不在話下, ADK, Android@Home的加入, 等於把它延伸到更大的範圍, Movie rental, Google Music更揭示了, Google後面那朵雲可以做Android多大的後盾, 今年的主角不是Android平板呀~~~而是Android everywhere~~~</p><p>這些東西朝我理想中的移動裝置越來越接近了, 之前一個想法就是, 一個好的移動裝置, 要有的三個特色, &ldquo;everywhere&rdquo;, &ldquo;get connected&rdquo;, 以及"seamless", 要能夠隨處取用(everywhere), 隨處取用並不只是單單針對一個裝置來說而已, 在不同場合可以取用不同適合的裝置, 如手機, 平板, 電視, 甚至智慧型3C家電, 而且這些東西不只要能夠有對外界溝通的管道, 甚至彼此可以互相溝通(Get connected), 這一點似乎Android@Home已經是某種程度上的實現了, 最後是"seamless", 不同的移動裝置除了可以互相溝通外, 甚至在使用轉換上可以"無感", 舉個簡單的例子來說, 當你在看一部電影時, 在等公車時, 可能因為有位子坐著, 所以拿出平板來看比較舒服, 等上了公車後, 人潮擁擠, 你會拿出手機接續著看, 等到了家, 電影還沒看完, 繼續轉到電視上看, 如果像這樣的使用體驗在不同的裝置上可以無縫的接續, 那真的會是更大的威力(不知道拿ADK bluetooth有沒辦法實現這樣的東西)</p><p>當所有的裝置都連接了, 在配合後端的雲, 那整個會成為一個Skynet或是Borg呢? :D</p><p>不過也不是完全沒負面的東西啦, 像是Music和Movie rental那東西, 勢必會變成Carrier一個惡夢, 智慧型手機替他們爭取到了不少使用者, 但是相對的也得付出代價, 越來越多的連網裝置, 如果基礎的infrastructure跟不上, 那勢必會是災難, 也不只Carrier而已, 對於一些網路的服務來說, 連接的媒體就不再只有PC, 數量會越來越多, 需求的架構就要更加紮實了&mldr;</p></div></div></article><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2011-05-10 14:19:21 +0000 UTC"><a href=/Generating-Facebook-key-hash-for-Android/>May 10, 2011</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>Reading time ~1 minute</span></div><h1 class=entry-title><a href=/Generating-Facebook-key-hash-for-Android/ rel=bookmark title="Generating Facebook key hash for Android" itemprop=url>Generating Facebook key hash for Android</a></h1></header><div class=entry-content><div class=posterous_autopost><p>According to<a href=http://developers.facebook.com/docs/guides/mobile/#android> Facebook mobile development document</a> (Android), you need to generate a key hash for your application in order to apply Facebook SSO(Single Sign on).</p><p>Here is the formal way to do this:</p><blockquote><p><span style=color:#9c0>keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64</span></p></blockquote><p>But sometimes you won&rsquo;t have a tradtional key store especially when building with Android open sources. Keys in Android open sources are in pk8 format. In order to generate key hashes with these keys, you need to tranfer them into a pk12 key store.</p><p>I created another way to generate keyhash without <em><strong>keytool</strong></em> and <em><strong>openssl</strong></em>. Here is the source codes: <a href=https://github.com/julianshen/FacebookKeyHashGen>FacebookKeyHashGen</a></p><p>This program get package sigature directly from package itself. </p></div></div></article><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2011-05-09 00:34:09 +0000 UTC"><a href=/POC%E7%AD%86%E8%A8%98Rhino-on-Android-%E6%96%B0%E7%9A%84onClickListener/>May 9, 2011</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>Reading time ~3 minutes</span></div><h1 class=entry-title><a href=/POC%E7%AD%86%E8%A8%98Rhino-on-Android-%E6%96%B0%E7%9A%84onClickListener/ rel=bookmark title="[POC][筆記][Rhino on Android] - 新的onClickListener" itemprop=url>[POC][筆記][Rhino on Android] - 新的onClickListener</a></h1></header><div class=entry-content><div class=posterous_autopost><p><a href=http://julianshen.posterous.com/pocrhino-developing-android-with-js-onclickli>上次的作法</a>:</p><blockquote><p><span style=color:maroon>var</span> button1 = findview(R.id(<span style=color:#36f>&lsquo;button1&rsquo;</span>));</p><p>button1.setOnClickListener(<span style=color:maroon>function</span>(view, methodName)<br>{<br>     if (methodName == <span style=color:#36f>&ldquo;onClick&rdquo;</span>) {<br>         log(&ldquo;MyScript&rdquo;, &ldquo;clicked&rdquo;);<br>} });</p></blockquote><p>當然不是很滿意, &ldquo;if(methodName == "onClick&rdquo;)&ldquo;這樣的寫法太醜了啦!</p><p>所以這次的目標是:</p><blockquote class=posterous_short_quote><p>button1.onclick = function(view) {</p><p>     log("MyScript&rdquo;, &ldquo;clicked&rdquo;);</p><p>     alert('Hi there!&rsquo;);</p><p>};</p></blockquote><p>這樣比較像印象中javascript的寫法</p><p>為了達到這目的, 必須在View中加入onclick這個property, 但原本View class(Java)並沒這東西, 如何將它包裝出來?</p><p>Rhino對於Javascript使用原生的java objects並不是直接使用, 還是有透過一層包裝, 因此這就是要做出這個property的路了, 包裝的點在於<a href=http://www.mozilla.org/rhino/apidocs/org/mozilla/javascript/WrapFactory.html>WrapFactory</a>, 而原生的Java object會被包裝長NativeJavaObject </p><p>而Rhino允許我們用自己的WrapFactory取代原本的, 像是這樣:</p><blockquote><p>jsContext.setWrapFactory(new <strong><span style=color:#f60>AndroidWrapFactory()</span></strong>);</p></blockquote><p>因此我們會需要自己實作這一個AndroidWrapFactory, 把原本的View改用不同的包裝, 而非原本的NativeJavaObject, 基本上只需要實作wrapAsJavaObject即可:</p><p><script src="https://gist.github.com/961470.js?file=AndroidWrapFactory.java"></script></p><p>這邊用了一個新實作的ViewWrapper來取代NativeJavaObject</p><p><script src="https://gist.github.com/961471.js?file=ViewWrapper.java"></script></p><p>本來我的打算是繼承自NativeJavaObject, 然後再加入自己的東西, 不過後來發現這樣的作法總會在"put"時出差錯, 原因是NativeJavaObject是沒辦法加入新的member了(其實這說法有點問題, 應該是只要設prototype給它的話還是可以), 加上一些比較實用的function是定義在ScriptableObject的裡面, 因此, 我最後採用ScriptableObject來包裝</p><p>但要如何在ScriptableObject裡面實現像NativeJavaObject那樣可以直接叫用原本的Java class裡面的member呢?這部份不用自己實作, 只要把原本的NativeJavaObject當做這新的ViewWrapper的prototype就好了, 所以這邊constructor呼叫的super contructor是:</p><blockquote class=posterous_short_quote><p>public ScriptableObject(Scriptable scope, Scriptable prototype)</p><p>===> super(scope, new NativeJavaObject(scope, javaObject, staticType));</p></blockquote><p>defineProperty這包裝是從ScritableObject那邊改寫其中一個過來的, 主要是用來讓我們可以把這些"onlick",&ldquo;onlongclick"包裝成property, 在ViewWrapper可以實作getter和setter, 為了避免名稱上的混淆, 所以把getter的prefix定義成"jsget"而setter是"jsset&rdquo;</p><p>在onlick的setter中, 除了將function object存起來外, 還直接對原本包裝的View設一個OnClickListener, 動作則是執行這個Function object</p><p>最後, 前面的範例裡面有一個"alert('Hi! there&rsquo;)&ldquo;, 因此為了"alert()"多實作一個Alert.java出來(跟上面的無關啦), 這是source:</p><p><script src="https://gist.github.com/961481.js?file=Alert.java"></script></p><p>接下來的目標, </p><ul><li>包裝一個實際真的可以拿來開發的package, release 0.1 alpha</li><li>實作XmlHttpRequest</li><li>Adapter & AdapterView, Service & Provider</li></ul></div></div></article><article class=hentry><header><div class=entry-meta><span class="entry-date date published updated"><time datetime="2011-05-03 12:35:19 +0000 UTC"><a href=/POC%E7%AD%86%E8%A8%98Rhino-Developing-Android-with-JS-onClickListener/>May 3, 2011</a></time></span>
<span class=entry-reading-time><i class="fa fa-clock-o"></i>Reading time ~1 minute</span></div><h1 class=entry-title><a href=/POC%E7%AD%86%E8%A8%98Rhino-Developing-Android-with-JS-onClickListener/ rel=bookmark title="[POC][筆記][Rhino] Developing Android with JS - onClickListener" itemprop=url>[POC][筆記][Rhino] Developing Android with JS - onClickListener</a></h1></header><div class=entry-content><div class=posterous_autopost><p><a href=http://julianshen.posterous.com/poc-using-javascript-to-develop-android-activ>上次做的</a>僅止於setText這個簡單的動作, 那像是處理click這類的怎做?</p><p>先拿click來做範例, 在Android中, 如果要替一個view加上處理click動作要利用到View.setOnClickListener, 但setOnClickListener的參數是onClickListener, 這是一個java interface, 在Rhino中如何實作一個Java interface?</p><p>首先, 不要被Rhino的文件給騙了, 那有問題(還花了我一個晚上看 :( ), Rhino的source codes裡有個example目錄, 裡面有隻SwingApplication.js, 答案就在這邊</p><p>因此, onClick就會像是這樣:</p><blockquote><p><span style=color:maroon>var</span> button1 = findview(R.id(<span style=color:#36f>&lsquo;button1&rsquo;</span>));</p><p>button1.setOnClickListener(<span style=color:maroon>function</span>(view, methodName)<br>{<br>     if (methodName == <span style=color:#36f>&ldquo;onClick&rdquo;</span>) {<br>         log(&ldquo;MyScript&rdquo;, &ldquo;clicked&rdquo;);<br>} });</p></blockquote><p>在這function內, 必須要自己判斷methodName來知道是哪個method被呼叫到, 應該是所有的java interface都可以用這樣去實作</p><p>OK, 這樣&mldr;很醜&mldr;繼續改進</p></div></div></article><div class=pagination><ul class=inline-list><li><a href=/tags/Android/page/6/ class=btn>Previous</a></li><li><a href=/tags/Android/>1</a></li><li><a href=/tags/Android/page/2/>2</a></li><li><a href=/tags/Android/page/3/>3</a></li><li><a href=/tags/Android/page/4/>4</a></li><li><a href=/tags/Android/page/5/>5</a></li><li><a href=/tags/Android/page/6/>6</a></li><li><strong class=current-page>7</strong></li><li><a href=/tags/Android/page/8/>8</a></li><li><a href=/tags/Android/page/9/>9</a></li><li><a href=/tags/Android/page/10/>10</a></li><li><a href=/tags/Android/page/11/>11</a></li><li><a href=/tags/Android/page/12/>12</a></li><li><a href=/tags/Android/page/8/ class=btn>Next</a></li></ul></div></div><div class=footer-wrapper><footer role=contentinfo><span>Powered by <a href=https://gohugo.io/ rel=nofollow>Hugo</a> using the <a href=https://github.com/dldx/hpstr-hugo-theme rel=nofollow>HPSTR theme</a>.</span></footer></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js></script><script src=https://kit.fontawesome.com/872a53b461.js crossorigin=anonymous></script><script>window.jQuery||document.write('<script src="\/js\/vendor\/jquery-1.9.1.min.js"><\/script>')</script><script src=/js/scripts.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-79243751-1','auto');ga('send','pageview');}</script><div id=fb-root></div><script async defer crossorigin=anonymous src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v7.0&appId=293999444006555&autoLogAppEvents=1" nonce=geZSUIUh></script></body></html>